<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect Test - LoL Application</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1a1c4b; 
            color: #c7a45d; 
            line-height: 1.6;
        }
        .test-section { 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid #c7a45d; 
            border-radius: 10px; 
            padding: 20px; 
            margin: 20px 0; 
        }
        .test-result { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
        }
        .success { background: rgba(46, 204, 113, 0.2); border: 1px solid #2ecc71; }
        .error { background: rgba(231, 76, 60, 0.2); border: 1px solid #e74c3c; }
        .info { background: rgba(52, 152, 219, 0.2); border: 1px solid #3498db; }
        .warning { background: rgba(255, 193, 7, 0.2); border: 1px solid #ffc107; }
        a { color: #c7a45d; text-decoration: none; font-weight: bold; }
        a:hover { text-decoration: underline; }
        code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; }
        .url-test { margin: 15px 0; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        button { 
            background: #c7a45d; 
            color: #1a1c4b; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
            font-weight: bold;
        }
        button:hover { background: #d4b76a; }
    </style>
</head>
<body>
    <h1>üîÑ Route Redirect Test</h1>
    <p>This page tests the GitHub Pages 404 redirect functionality for <code>/match/</code> routes.</p>

    <div class="test-section">
        <h2>üìã Test Summary</h2>
        <div class="test-result info">
            <strong>Issue:</strong> <code>/match/EUW1_7417459564</code> was redirecting to main site instead of LoL app
        </div>
        <div class="test-result info">
            <strong>Solution:</strong> Updated 404.html to redirect <code>/match/</code> routes to <code>/lol/match/</code> format
        </div>
        <div class="test-result success">
            <strong>Expected Result:</strong> <code>https://yuumi.quest/match/EUW1_7417459564</code> should redirect to <code>https://yuumi.quest/lol/match/EUW1_7417459564</code>
        </div>
    </div>

    <div class="test-section">
        <h2>üß™ Manual Test Links</h2>
        <p>Click these links to test the redirect functionality:</p>
        
        <div class="url-test">
            <strong>‚ùå Old Format (should redirect):</strong><br>
            <a href="/match/EUW1_7417459564" target="_blank">/match/EUW1_7417459564</a><br>
            <small>This should redirect to the LoL app with the correct format</small>
        </div>
        
        <div class="url-test">
            <strong>‚úÖ Correct Format (should work directly):</strong><br>
            <a href="/lol/match/EUW1_7417459564">/lol/match/EUW1_7417459564</a><br>
            <small>This should work directly without any redirects</small>
        </div>
        
        <div class="url-test">
            <strong>‚úÖ Legacy Format (should work directly):</strong><br>
            <a href="/lol/EUW17417459564">/lol/EUW17417459564</a><br>
            <small>This should work directly without any redirects</small>
        </div>
    </div>

    <div class="test-section">
        <h2>üîç Redirect Logic Test</h2>
        <button onclick="testRedirectLogic()">Test Redirect Logic</button>
        <div id="redirect-results"></div>
    </div>

    <div class="test-section">
        <h2>üìù Test Instructions</h2>
        <ol>
            <li><strong>Test the old format link above</strong> - it should redirect to the LoL app</li>
            <li><strong>Check the URL after redirect</strong> - it should be <code>/lol/match/EUW1_7417459564</code></li>
            <li><strong>Verify the match loads</strong> - the LoL app should display the match analysis</li>
            <li><strong>Test the correct format link</strong> - it should work without any redirects</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üîß Technical Details</h2>
        <div class="test-result info">
            <strong>404.html Changes:</strong><br>
            Added logic to detect <code>/match/</code> routes and redirect them to <code>/lol/match/</code> format
        </div>
        <div class="test-result info">
            <strong>Router Support:</strong><br>
            LoL app router already supports <code>/lol/match/[matchid]</code> format
        </div>
        <div class="test-result info">
            <strong>Backward Compatibility:</strong><br>
            Legacy <code>/lol/REGIONMATCHID</code> format still works
        </div>
    </div>

    <script>
        function addResult(container, type, message) {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            container.appendChild(div);
        }

        function testRedirectLogic() {
            const results = document.getElementById('redirect-results');
            results.innerHTML = '<h3>Redirect Logic Test Results:</h3>';

            // Simulate the 404.html redirect logic
            const testPaths = [
                '/match/EUW1_7417459564',
                '/match/NA1_5678901234',
                '/lol/EUW17417459564',
                '/lol/match/EUW1_7417459564',
                '/invalid/path'
            ];

            testPaths.forEach(path => {
                let redirectUrl = '';
                let description = '';

                // Simulate the 404.html logic
                if (path.startsWith('/lol/')) {
                    redirectUrl = '/lol/?redirect=' + encodeURIComponent(path);
                    description = 'LoL route - redirect to LoL app';
                } else if (path.startsWith('/match/')) {
                    const newPath = path.replace('/match/', '/lol/match/');
                    redirectUrl = '/lol/?redirect=' + encodeURIComponent(newPath);
                    description = 'Match route - convert to LoL match format';
                } else {
                    redirectUrl = '/?redirect=' + encodeURIComponent(path);
                    description = 'Other route - redirect to main site';
                }

                const type = path.startsWith('/match/') ? 'success' : 'info';
                addResult(results, type, `<strong>${path}</strong><br>‚Üí ${redirectUrl}<br><small>${description}</small>`);
            });

            addResult(results, 'success', '<strong>‚úÖ Test Complete!</strong> The redirect logic should now properly handle /match/ routes.');
        }

        // Auto-run the test on page load
        setTimeout(testRedirectLogic, 500);
    </script>
</body>
</html>
