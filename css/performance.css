/* Performance Optimizations */

/* GPU Acceleration for Animations */
.animate-gpu {
    transform: translateZ(0);
    will-change: transform;
}

.loading-spinner,
.spinner,
.pulse-circle,
.league-spinner {
    transform: translateZ(0);
    will-change: transform;
}

/* Optimize Repaints */
.tab-button,
.btn,
.player-card,
.team-card {
    will-change: background-color, border-color, box-shadow;
}

.tab-button:hover,
.btn:hover,
.player-card:hover,
.team-card:hover {
    will-change: auto;
}

/* Contain Layout Shifts */
.champion-image,
.item-image,
.spell-image {
    contain: layout style;
    aspect-ratio: 1;
}

.champion-icon,
.champion-mini {
    contain: layout style;
    aspect-ratio: 1;
}

/* Optimize Scrolling */
.tab-content-container,
.events-container,
.players-grid {
    contain: layout style;
    overflow-anchor: auto;
}

/* Reduce Paint Complexity */
.progress-bar,
.bar-container {
    contain: layout style paint;
}

.progress-fill,
.bar-fill {
    contain: layout style;
}

/* Optimize Text Rendering */
body,
.text-primary,
.text-secondary {
    text-rendering: optimizeSpeed;
    font-display: swap;
}

h1, h2, h3, h4, h5, h6 {
    text-rendering: optimizeLegibility;
}

/* Optimize Image Loading */
.champion-image,
.item-image,
.spell-image {
    loading: lazy;
    decoding: async;
}

/* Critical Images (above fold) */
.champion-image.critical,
.item-image.critical {
    loading: eager;
    decoding: sync;
}

/* Optimize Backdrop Filters */
.backdrop-blur,
.backdrop-blur-sm,
.backdrop-blur-md,
.backdrop-blur-lg {
    contain: layout style;
    isolation: isolate;
}

/* Reduce Composite Layers */
.tab-pane {
    contain: layout style;
}

.tab-pane.active {
    contain: layout style paint;
}

/* Optimize Transforms */
.hover\:scale-105:hover,
.hover\:scale-110:hover {
    transform: translateZ(0) scale(1.05);
}

/* Memory Management */
.large-dataset {
    contain: strict;
}

.virtual-scroll {
    contain: layout style;
    overflow: auto;
    height: 400px;
}

/* Optimize Gradients */
.gradient-primary,
.gradient-accent,
.gradient-success {
    background-attachment: fixed;
    contain: layout style;
}

/* Reduce Reflow */
.stats-table {
    table-layout: fixed;
    contain: layout style;
}

.stats-table th,
.stats-table td {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Optimize Flexbox */
.flex-container {
    contain: layout style;
}

.flex-item {
    flex-shrink: 0;
    contain: layout style;
}

/* Optimize Grid */
.grid-container {
    contain: layout style;
}

.grid-item {
    contain: layout style;
}

/* Intersection Observer Optimizations */
.lazy-load {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.lazy-load.loaded {
    opacity: 1;
}

/* Reduce JavaScript Layout Thrashing */
.js-measure {
    contain: layout;
}

.js-animate {
    contain: layout style;
    will-change: transform;
}

/* Critical CSS Inlining Helpers */
.above-fold {
    /* Styles for above-the-fold content */
    contain: layout style paint;
}

.below-fold {
    /* Styles for below-the-fold content */
    contain: layout style;
}

/* Optimize Shadows for Performance */
.shadow-optimized {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    contain: layout style;
}

.shadow-optimized:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

/* Reduce Paint on Scroll */
.scroll-container {
    contain: layout style;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
}

/* Optimize Animations for 60fps */
@keyframes optimized-fade-in {
    from {
        opacity: 0;
        transform: translate3d(0, 10px, 0);
    }
    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

@keyframes optimized-slide-up {
    from {
        transform: translate3d(0, 20px, 0);
        opacity: 0;
    }
    to {
        transform: translate3d(0, 0, 0);
        opacity: 1;
    }
}

.animate-optimized-fade-in {
    animation: optimized-fade-in 0.3s ease-out;
}

.animate-optimized-slide-up {
    animation: optimized-slide-up 0.3s ease-out;
}

/* Preload Critical Resources */
.preload-fonts {
    font-display: swap;
}

/* Optimize for Mobile Performance */
@media (max-width: 768px) {
    /* Reduce complexity on mobile */
    .backdrop-blur,
    .backdrop-blur-sm,
    .backdrop-blur-md,
    .backdrop-blur-lg {
        backdrop-filter: none;
        background: rgba(42, 23, 88, 0.95);
    }

    /* Simplify shadows on mobile */
    .shadow,
    .shadow-md,
    .shadow-lg {
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Reduce animation complexity */
    .loading-spinner,
    .spinner {
        animation-duration: 1.5s;
    }

    /* Optimize touch interactions */
    .btn,
    .tab-button {
        touch-action: manipulation;
    }
}

/* Battery Optimization */
@media (prefers-reduced-motion: reduce) {
    /* Disable expensive animations */
    .backdrop-blur,
    .backdrop-blur-sm,
    .backdrop-blur-md,
    .backdrop-blur-lg {
        backdrop-filter: none;
    }

    .shadow-glow {
        box-shadow: 0 2px 8px rgba(199, 164, 93, 0.15);
    }

    .gradient-primary,
    .gradient-accent {
        background: var(--secondary-bg);
    }
}

/* Network Optimization */
.network-aware {
    /* Styles that adapt based on connection quality */
}

/* Slow connection optimizations */
@media (prefers-reduced-data: reduce) {
    .backdrop-blur,
    .backdrop-blur-sm,
    .backdrop-blur-md,
    .backdrop-blur-lg {
        backdrop-filter: none;
        background: var(--secondary-bg);
    }

    .gradient-primary,
    .gradient-accent,
    .gradient-success {
        background: var(--secondary-bg);
    }

    .shadow,
    .shadow-md,
    .shadow-lg,
    .shadow-xl {
        box-shadow: none;
        border: 1px solid var(--border-subtle);
    }
}

/* Memory Optimization */
.memory-efficient {
    contain: strict;
    content-visibility: auto;
    contain-intrinsic-size: 200px;
}

/* Large lists optimization */
.virtual-list {
    contain: strict;
    overflow: auto;
    height: 400px;
}

.virtual-list-item {
    contain: layout style;
    content-visibility: auto;
    contain-intrinsic-size: 60px;
}

/* Optimize for different screen densities */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .champion-image,
    .item-image {
        image-rendering: -webkit-optimize-contrast;
    }
}

/* Optimize for different color gamuts */
@media (color-gamut: p3) {
    :root {
        --accent-color: color(display-p3 0.78 0.64 0.36);
        --team-blue: color(display-p3 0.29 0.56 0.88);
        --team-red: color(display-p3 0.90 0.30 0.24);
    }
}

/* CPU Optimization */
.cpu-intensive {
    contain: layout style paint;
    will-change: auto;
}

/* Optimize for different refresh rates */
@media (min-resolution: 120dpi) {
    .smooth-animation {
        animation-duration: 0.25s;
    }
}

/* Optimize for different input methods */
@media (hover: hover) {
    .hover-effects {
        transition: all 0.2s ease;
    }
}

@media (hover: none) {
    .hover-effects {
        transition: none;
    }
    
    .hover\:scale-105:hover,
    .hover\:scale-110:hover {
        transform: none;
    }
}

/* Optimize for different pointer types */
@media (pointer: coarse) {
    .btn,
    .tab-button {
        min-height: 44px;
        min-width: 44px;
    }
}

@media (pointer: fine) {
    .btn,
    .tab-button {
        min-height: 32px;
        min-width: 32px;
    }
}

/* Critical Path Optimization */
.critical-path {
    contain: layout style paint;
    font-display: block;
}

.non-critical {
    contain: layout style;
    font-display: swap;
}

/* Optimize for different orientations */
@media (orientation: landscape) and (max-height: 500px) {
    .home-header h1 {
        font-size: 1.5rem;
    }
    
    .search-container {
        padding: 1rem;
    }
}

/* Optimize for foldable devices */
@media (spanning: single-fold-vertical) {
    .match-view {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }
}

@media (spanning: single-fold-horizontal) {
    .tab-nav {
        position: sticky;
        top: 0;
        z-index: var(--z-sticky);
    }
}
